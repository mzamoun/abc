<!DOCTYPE html>
<html>
<head> <meta charset="utf-8" />
    <title>Un formulaire de connexion en AJAX</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>    

</head>
 
<body>
    <div id="resultat">
        <!-- Nous allons afficher un retour en jQuery au visiteur -->
    </div>
         
        <h1>Un formulaire de connexion en AJAX</h1>
 
    <form>
        <p>
        Nom d'utilisateur : <input type="text" id="username" />
        Mot de passe : <input type="password" id="password" />
        <input type="submit" id="submit" value="Se connecter !" />
        </p>
    </form>
 
</body>
</html>
 
<script>
 
$(document).ready(function(){
 
    $("#submit").click(function(e){
        e.preventDefault();

        var url = 'https://script.google.com/macros/s/AKfycbxk98o9O9xHN8fjBpEo8Y14MvmUZ5Inhf1dytkrI2GbRMQVKc-Ql-QtejNVYHxGbOwF/exec';
        var myData = {
            cmd: 'login',
            username : $("#username").val(),  // Nous récupérons la valeur de nos input que l'on fait passer à connexion.php
            password : $("#password").val()
        };
 
        $.ajax({

                url: url,
                data: myData,
                type: 'GET',
                crossDomain: true,
                dataType: 'html',
                
                xhrFields: {
                    withCredentials: true,
                    cors: true,
                },
                
                success: function(res) { 
                    console.log(res);
                    res = JSON.stringify(res);
                    $("#resultat").html("<p>Vous avez été connecté avec succès !</p><br>" + 'res=' + res);
                 },
                error: function(err) { 
                    console.log(err);
                    err = JSON.stringify(err);
                    $("#resultat").html("<p>Erreur ! </p><br>" + 'err=' + err);
                 },
                });
    });
});
 
</script>

<!--

https://mzamoun.github.io/abc/index.html

-->